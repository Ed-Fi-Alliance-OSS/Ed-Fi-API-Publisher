"use strict";(self.webpackChunked_fi_api_publisher=self.webpackChunked_fi_api_publisher||[]).push([[4756],{8469:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>d});var i=s(4848),n=s(8453);const r={},o="Known Limitations for Ed-Fi ODS/API 5.1-5.3 (Details)",a={id:"tech/Known-Issues-Details",title:"Known Limitations for Ed-Fi ODS/API 5.1-5.3 (Details)",description:"Below are usage notes if using Ed-Fi ODS/API 5.1-5.3 only.  These issues have been resolved in the Ed-Fi ODS / API 5.3-cqe patch and also resolved in upstream versions Ed-Fi ODS / API 6.1.",source:"@site/docs/tech/Known-Issues-Details.md",sourceDirName:"tech",slug:"/tech/Known-Issues-Details",permalink:"/Ed-Fi-API-Publisher/docs/tech/Known-Issues-Details",draft:!1,unlisted:!1,editUrl:"https://github.com/ed-fi-alliance-oss/Ed-Fi-API-Publisher/tree/gh-pages/pages/docs/docs/tech/Known-Issues-Details.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Extensibility",permalink:"/Ed-Fi-API-Publisher/docs/tech/Extensibility"},next:{title:"Remediations",permalink:"/Ed-Fi-API-Publisher/docs/tech/Remediations"}},l={},d=[{value:"Deletes Cannot Be Published (without a custom build of the ODS API)",id:"deletes-cannot-be-published-without-a-custom-build-of-the-ods-api",level:2},{value:"Primary Key Changes Cannot Be Published",id:"primary-key-changes-cannot-be-published",level:2},{value:"Deletes of Descriptors Cannot Be Published (without custom processing)",id:"deletes-of-descriptors-cannot-be-published-without-custom-processing",level:2},{value:"Profiles Not Currently Supported",id:"profiles-not-currently-supported",level:2}];function c(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",li:"li",p:"p",ul:"ul",...(0,n.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h1,{id:"known-limitations-for-ed-fi-odsapi-51-53-details",children:"Known Limitations for Ed-Fi ODS/API 5.1-5.3 (Details)"}),"\n",(0,i.jsxs)(t.p,{children:["Below are usage notes if using Ed-Fi ODS/API 5.1-5.3 only.  These issues have been resolved in the ",(0,i.jsx)(t.a,{href:"https://techdocs.ed-fi.org/display/EFTD/Change+Query+Enhancements",children:"Ed-Fi ODS / API 5.3-cqe"})," patch and also resolved in upstream versions ",(0,i.jsx)(t.a,{href:"https://techdocs.ed-fi.org/pages/viewpage.action?pageId=138642238",children:"Ed-Fi ODS / API 6.1"}),"."]}),"\n",(0,i.jsx)(t.h2,{id:"deletes-cannot-be-published-without-a-custom-build-of-the-ods-api",children:"Deletes Cannot Be Published (without a custom build of the ODS API)"}),"\n",(0,i.jsxs)(t.p,{children:['Resources deleted in the source API cannot currently be published by the Ed-Fi API Connector due to the implementation of the Change Queries feature in the Ed-Fi ODS API. As currently implemented, the API provides a "/deletes" resource under each data management resource (e.g. ',(0,i.jsx)(t.em,{children:"/data/v3/ed-fi/students/deletes"}),"). However, the resource only returns two properties for each deleted item: the resource identifier and the change version. Unfortunately, resource identifiers cannot be specified by API clients upon creation (they are server-assigned values), and so as data is moved from a given source API to one or more targets, each corresponding target's resource will have its own resource identifier for the resource. Since the Ed-Fi API Publisher only has access to the source's resource identifier, no meaningful action can be taken against the target."]}),"\n",(0,i.jsx)(t.p,{children:"There has been some discussion with the Ed-Fi Alliance about how to address this deficiency, but there is currently no timeline available for a resolution."}),"\n",(0,i.jsx)(t.h2,{id:"primary-key-changes-cannot-be-published",children:"Primary Key Changes Cannot Be Published"}),"\n",(0,i.jsx)(t.p,{children:'While it is generally preferred in relational database design for primary keys to be treated as immutable, with the natural key style of the Ed-Fi model, primary key value changes are inevitable for some resources (often because of the inclusion of "BeginDate" values, or similarly volatile values).'}),"\n",(0,i.jsxs)(t.p,{children:["For this reason, there are some API resources that support changes to primary key values through ",(0,i.jsx)(t.code,{children:"PUT"})," requests. API clients identify the resource to be updated by providing the ",(0,i.jsx)(t.code,{children:"id"})," in the route. The request body is then used to supply the new key values."]}),"\n",(0,i.jsx)(t.p,{children:"The Ed-Fi ODS API supports this functionality for the following resources:"}),"\n",(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsx)(t.li,{children:"classPeriods"}),"\n",(0,i.jsx)(t.li,{children:"grades"}),"\n",(0,i.jsx)(t.li,{children:"gradebookEntries"}),"\n",(0,i.jsx)(t.li,{children:"locations"}),"\n",(0,i.jsx)(t.li,{children:"sections"}),"\n",(0,i.jsx)(t.li,{children:"sessions"}),"\n",(0,i.jsx)(t.li,{children:"studentSchoolAssociations"}),"\n",(0,i.jsx)(t.li,{children:"studentSectionAssociations"}),"\n"]}),"\n",(0,i.jsx)(t.p,{children:'If an API client updates a primary key value as described above, the Change Queries implementation of the Ed-Fi ODS will not reflect this. The "new" resource (and all its dependencies) will be visible as new resources, but the removal of the "old" resource(s) will not. The result will be that a stale copies of all of the affected items (with the old primary key values) will be stranded in the target ODS.'}),"\n",(0,i.jsx)(t.h2,{id:"deletes-of-descriptors-cannot-be-published-without-custom-processing",children:"Deletes of Descriptors Cannot Be Published (without custom processing)"}),"\n",(0,i.jsxs)(t.p,{children:["Since the resource ",(0,i.jsx)(t.code,{children:"id"})," values are not portable between Ed-Fi ODS databases, API clients must use the primary key values to locate target resources when publishing deletes. However, the primary key of the ",(0,i.jsx)(t.code,{children:"edfi.Descriptor"})," table in the ODS is an internal identity column which is also not portable, but is exposed to the client. Thus, the resources must be identified by the ",(0,i.jsx)(t.em,{children:"alternate key"})," -- ",(0,i.jsx)(t.code,{children:"namespace"})," and ",(0,i.jsx)(t.code,{children:"codeValue"}),". However, the Ed-Fi ODS tracks deletes using triggers which a) don't have the namespace/codeValue in context in the derived descriptor table triggers, and b) don't have the descriptor sub-type in context in the base Descriptor table trigger. The consequence is that API does not currently make it possible to publish descriptor deletions."]}),"\n",(0,i.jsx)(t.h2,{id:"profiles-not-currently-supported",children:"Profiles Not Currently Supported"}),"\n",(0,i.jsxs)(t.p,{children:["When an API Profile is defined, it introduces an intentional requirement on the part of the API client to communicate with the Ed-Fi ODS API using profile-specific content types (e.g. ",(0,i.jsx)(t.code,{children:"_application/vnd.ed-fi.{resource}.{profile}.readable+json_"}),"). The reason for this behavior is that it is important for an API client to acknowledge that they are aware that they are reading or writing only ",(0,i.jsx)(t.em,{children:"part"})," of a resource rather than operating on the resource as a ",(0,i.jsx)(t.em,{children:"whole"}),".  When extra JSON data is supplied in a POST request to the Ed-Fi ODS API, the request will be processed and the extraneous data will just be ignored. Without the explicit use of the content types, unexpected data loss could result."]}),"\n",(0,i.jsx)(t.p,{children:"The Ed-Fi API Publisher does not currently automatically identify that use of a profile-based content type is required after interacting with either the source or target APIs. Thus, requests against such an API endpoint will currently fail."})]})}function h(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,t,s)=>{s.d(t,{R:()=>o,x:()=>a});var i=s(6540);const n={},r=i.createContext(n);function o(e){const t=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),i.createElement(r.Provider,{value:t},e.children)}}}]);