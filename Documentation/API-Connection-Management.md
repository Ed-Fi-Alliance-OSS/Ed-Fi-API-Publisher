# API Connection Management

The Quick Start exercise supplies all connection information explicitly as command-line arguments, however to better operationalize the API Publisher you should create a Configuration Store to securely configure named API connections, and to track the state of publishing between various source and target APIs.

Currently there are two Configuration Store implementations provided:

* [Configuration Store for SQL Server](Sql-Server-Configuration.md)
* Configuration Store for AWS (using [Systems Manager Parameter Store](https://docs.aws.amazon.com/systems-manager/latest/userguide/systems-manager-parameter-store.html))

## Defining API Connections

The configuration needed for managing a named connection is described below.

| Parameter Name                                                              | Type         | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| --------------------------------------------------------------------------- | ------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| /ed-fi/publisher/connections/_{connectionName}_/url                         | String       | The base URL of the Ed-Fi ODS API (up to, but not including, the _/data/v3_ portion of the URL).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| /ed-fi/publisher/connections/_{connectionName}_/key                         | SecureString | The key to use for API authentication.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| /ed-fi/publisher/connections/_{connectionName}_/secret                      | SecureString | The secret to use for API authentication.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| /ed-fi/publisher/connections/_{connectionName}_/force                       | String       | (_Optional_) A boolean value (true/false) indicating whether the source Ed-Fi ODS API data should be published even if it does not support an isolated context through the use of database snapshots (see the "Publishing" extension described earlier in this document for more details).                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| /ed-fi/connector/connections/_{connectionName}_/resources                   | String       | _(Optional)_ For _source_ API connections, the domain resources (excluding descriptors, which are handled separately) to publish to the target. The value is defined using a CSV format (comma-separated values), and should contain the partial paths to the resources (e.g. _/ed-fi/students_,_/custom/busRoutes_). For convenience when working with Ed-Fi standard resources, only the name is required (e.g. _students,studentSchoolAssociations_). The Ed-Fi API Publisher will also evaluate and automatically include all dependencies of the requested resources (using the dependency metadata exposed by the target API). This will ensure (barring misconfigured authorization metadata or data policies) that data can be successfully published to the target API. |
| /ed-fi/connector/connections/_{connectionName}_/lastChangeVersionsProcessed | String       | _(Optional)_ For _source_ API connections, contains a JSON object, keyed by target API name, that indicates the last change version successfully published from the source to the target. This value is automatically created/updated by the Ed-Fi API Publisher after successfully completing the publishing process.                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
